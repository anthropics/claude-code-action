#!/bin/bash

echo "ðŸ“Š Monitoring Token Refresh Events"
echo "================================="
echo ""
echo "Local test results:"
echo "âœ… Token rotation initialized successfully"
echo "âœ… Initial token refresh scheduled for 630 minutes (10.5 hours)"
echo "âœ… Dispatcher running with dynamic token authorization"
echo ""
echo "Token refresh will occur:"
echo "   - 30 minutes before expiration (11.5 hours after start)"
echo "   - Automatically retry on failure after 5 minutes"
echo "   - Update both access token and refresh token"
echo ""
echo "To monitor in production:"
echo "   kubectl logs -f deployment/peerbot-dispatcher -n peerbot | grep -E '(refresh|token|Token|Refresh)'"
echo ""
echo "Expected log messages:"
echo "   - 'Initializing token rotation...'"
echo "   - 'Scheduling token refresh in X minutes'"
echo "   - 'Refreshing Slack access token...'"
echo "   - 'Token refreshed successfully. Expires in 43200 seconds'"